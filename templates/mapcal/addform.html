{% load staticfiles %}

<html>
<head>
<title>google maps for chrome</title>
<style type="text/css">
html, body { margin: 0; padding: 0; height: 100%; width: 100% }
#mymap { width: 400px; height: 50%; }
</style>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script src="{% static 'mapcal/js/jquery-1.9.1.js' %}"></script>
<script type="text/javascript">
  var map;

var markarr = [];

function addMarker(lat, lng) {
  tmpmarker = new google.maps.Marker({ position: newLatLng(lat, lng) });
  tmpmarker.setMap(map);
  markarr.push(tmpmarker);
}


  function initialize() {
  var mapOptions = { center: new google.maps.LatLng(0.0, 0.0), zoom: 0,
  mapTypeId: google.maps.MapTypeId.ROADMAP };
  map = new google.maps.Map(document.getElementById("mymap"), mapOptions);


//addMarker(45, -74);
//addMarker(44, -73);
//addMarker(43, -72);

map.setCenter(newLatLng(45,-74));

    google.maps.event.addListener(map, 'click', function(event) {
        //alert("map clicked");
        clickLat = event.latLng.lat();
        clickLng = event.latLng.lng();
        addMarker(clickLat, clickLng);
        $("#nummarkers").val(parseInt($("#nummarkers").val()) + 1);
        $("#markercoords").val($("#markercoords").val() + clickLat + "," + clickLng + ";");
    });
  }

  var newLatLng = function(lat, lng) {
  return new google.maps.LatLng(lat, lng);
  }

  google.maps.event.addDomListener(window, 'load', initialize);
</script>

</head>
<body>
<form action="/mapcal/add/" method="post">
<input type="hidden" name="username" value="tina">
<input type="hidden" name="nummarkers" id="nummarkers" value="0">
<input type="hidden" name="markercoords" id="markercoords">

<p>description: <input type="text" name="desc"></p>
<p>notes: <textarea name="notes" rows="3" cols="40"></textarea></p>
<p>tag 1: <input type="text" name="tag1" value="fun"></p>
<p>tag 2: <input type="text" name="tag2"></p>
<p>tag 3: <input type="text" name="tag3"></p>

<input type="submit" value="Add appt">
  <div id="mymap" width="100%"></div>
{% csrf_token %}
</form>
